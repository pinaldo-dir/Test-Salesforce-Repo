<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>Assign_Case_Owner_to_Assigned_Deputy_and_Senior_Deputy</name>
        <label>Assign Case Owner to Assigned Deputy and Senior Deputy</label>
        <locationX>677</locationX>
        <locationY>620</locationY>
        <assignmentItems>
            <assignToReference>varCaseAssignedDeputy</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varOwnerEmployeeID</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Assigned_Deputy_on_Inspection_Request</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_for_Assigned_Deputy</name>
        <label>Check for Assigned Deputy</label>
        <locationX>384</locationX>
        <locationY>486</locationY>
        <defaultConnector>
            <targetReference>Assigned_Deputy_User_ID</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Deputy Assigned</defaultConnectorLabel>
        <rules>
            <name>Assigned_Deputy_Blank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varCaseAssignedDeputy</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lookup_Owner_Employee_Record</targetReference>
            </connector>
            <label>Assigned Deputy Blank</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Inspection_Request_ID</name>
        <label>Check Inspection Request ID</label>
        <locationX>113</locationX>
        <locationY>15</locationY>
        <defaultConnectorLabel>Inspection Request ID Not Passed</defaultConnectorLabel>
        <rules>
            <name>Inspection_Request_ID_Passed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varInspectionRequestID</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Case_Assigned_to_Inspection_Request</targetReference>
            </connector>
            <label>Inspection Request ID Passed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Owner_is_a_Queue</name>
        <label>Owner is a Queue</label>
        <locationX>113</locationX>
        <locationY>495</locationY>
        <defaultConnector>
            <targetReference>Lookup_Case_Information_to_Add_to_Inspection_Request_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Owner is a User</defaultConnectorLabel>
        <rules>
            <name>Owner_is_a_Queue_Skip</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varISAQueue</leftValueReference>
                <operator>NotEqualTo</operator>
            </conditions>
            <label>Owner is a Queue Skip</label>
        </rules>
    </decisions>
    <description>Updated Logic to determine if there is a Queue as an Owner, and gets the proper Employee Record for an Owner and Assigns. Queue fix</description>
    <interviewLabel>Set Assigned Deputy on Inspection Request Create {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Set Assigned Deputy on Inspection Request Create</label>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Assigned_Deputy_User_ID</name>
        <label>Assigned Deputy User ID</label>
        <locationX>381</locationX>
        <locationY>347</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assigned_Deputy_User_ID_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varCaseAssignedDeputy</elementReference>
            </value>
        </filters>
        <object>DIR_Employee__c</object>
        <outputAssignments>
            <assignToReference>varCaseAssignedDeputy</assignToReference>
            <field>User__c</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Assigned_Deputy_User_ID_0</name>
        <label>Assigned Deputy User ID</label>
        <locationX>673</locationX>
        <locationY>346</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Assigned_Deputy_on_Inspection_Request</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varCaseAssignedSeniorDeputy</elementReference>
            </value>
        </filters>
        <object>DIR_Employee__c</object>
        <outputAssignments>
            <assignToReference>varCaseAssignedSeniorDeputy</assignToReference>
            <field>User__c</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Case_Assigned_to_Inspection_Request</name>
        <label>Case Assigned to Inspection Request</label>
        <locationX>112</locationX>
        <locationY>160</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Lookup_Case_Owner</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varInspectionRequestID</elementReference>
            </value>
        </filters>
        <object>Inspection_Request__c</object>
        <outputAssignments>
            <assignToReference>varCaseID</assignToReference>
            <field>Case__c</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Check_if_Case_Owner_is_Queue</name>
        <label>Check if Case Owner is Queue</label>
        <locationX>112</locationX>
        <locationY>379</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Owner_is_a_Queue</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>QueueId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varCaseOwnerID</elementReference>
            </value>
        </filters>
        <object>QueueSobject</object>
        <outputAssignments>
            <assignToReference>varISAQueue</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Lookup_Case_Information_to_Add_to_Inspection_Request_0</name>
        <label>Lookup Case Information to Add to Inspection Request</label>
        <locationX>112</locationX>
        <locationY>644</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_for_Assigned_Deputy</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varCaseID</elementReference>
            </value>
        </filters>
        <object>DIR_Case__c</object>
        <outputAssignments>
            <assignToReference>varCaseAssignedDeputy</assignToReference>
            <field>Assigned_Deputy__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varCaseAssignedSeniorDeputy</assignToReference>
            <field>Owner_s_Manager__c</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Lookup_Case_Owner</name>
        <label>Lookup Case Owner</label>
        <locationX>110</locationX>
        <locationY>273</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_if_Case_Owner_is_Queue</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varCaseID</elementReference>
            </value>
        </filters>
        <object>DIR_Case__c</object>
        <outputAssignments>
            <assignToReference>varCaseOwnerID</assignToReference>
            <field>OwnerId</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Lookup_Owner_Employee_Record</name>
        <label>Lookup Owner Employee Record</label>
        <locationX>384</locationX>
        <locationY>624</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Case_Owner_to_Assigned_Deputy_and_Senior_Deputy</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>User__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varCaseOwnerID</elementReference>
            </value>
        </filters>
        <object>DIR_Employee__c</object>
        <outputAssignments>
            <assignToReference>varOwnerEmployeeID</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordUpdates>
        <name>Update_Assigned_Deputy_on_Inspection_Request</name>
        <label>Update Assigned Deputy on Inspection Request</label>
        <locationX>676</locationX>
        <locationY>481</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varInspectionRequestID</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Assigned_Deputy__c</field>
            <value>
                <elementReference>varCaseAssignedDeputy</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Assigned_Senior_Deputy__c</field>
            <value>
                <elementReference>varCaseAssignedSeniorDeputy</elementReference>
            </value>
        </inputAssignments>
        <object>Inspection_Request__c</object>
    </recordUpdates>
    <startElementReference>Check_Inspection_Request_ID</startElementReference>
    <status>Active</status>
    <variables>
        <description>Assigned Deputy on Case</description>
        <name>varCaseAssignedDeputy</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Caase Assigned Senior Deputy</description>
        <name>varCaseAssignedSeniorDeputy</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Case ID on Inspection Request</description>
        <name>varCaseID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Case Owner ID</description>
        <name>varCaseOwnerID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Inspection Request ID that was just Created</description>
        <name>varInspectionRequestID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>This will hold a Queue ID if the Owner ID is a Queue.</description>
        <name>varISAQueue</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Owner ID Record for Assigned Deputy</description>
        <name>varOwnerEmployeeID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
