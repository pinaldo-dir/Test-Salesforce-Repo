<apex:page controller="printRegDetailsController" docType="HTML-5.0" applyHtmlTag="TRUE" applyBodyTag="true" sidebar="false" showHeader="false" standardStylesheets="true" lightningStyleSheets="true">
    
   <!-- <apex:define name="body">-->
        
        <apex:slds />
                
        <apex:form >
            <!--{!$CurrentPage.parameters.listCount}:
{!$CurrentPage.parameters.myList}-->
            
            <apex:slds />
            <style>
                .slds-scope body {
                font-size:inherit;
                background: 0 0;
                }
                
                .slds-scope .slds-card {
                background:0 0;
                }
                .regDetailsClass{
                width: 407.5px;
                }
            </style>
            <div id="RegistrationGrid" class="slds-scope">
                <style>
                    
                    .slds-scope .slds-form-element__label{
                    font-size: 1.3rem;
                    }
                    
                    .slds-scope h1, .slds-scope h2, .slds-scope h3, .slds-scope h4, .slds-scope h5, .slds-scope h6 {
                    font-size: 1.6rem;
                    }
                </style>
                <br/>
                <br/>
                
            </div><!--slds scope-->
            <div id="errorDisplay" style="display:none;margin-top:10px;">
                <h3>Error Encountered</h3>
                <p id="errorMessage"></p>
            </div>
            <div id="spinner" class="slds-spinner_container slds-is-relative" style="display:none;margin-top:50px;">
                <div role="status" class="slds-spinner slds-spinner--large slds-spinner--brand">
                    <div class="slds-spinner__dot-a"></div>
                    <div class="slds-spinner__dot-b"></div>
                </div>
            </div>   
            <div id="RegistrationDataTable" class="slds-scope"></div>
            <ul class="step" id="stepList"></ul>
            
        </apex:form>
        
   <!-- </apex:define>-->
    
    
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <apex:includeScript value="{!$Resource.Cookie}"/>
        
        
        <script>
        Visualforce.remoting.timeout = 120000; // Set timeout at page level
        
        function getnewRegList(){
        var loop = true;
        var appendList = '';
        Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.printRegDetailsController.getnewRegList}',
                                                  {!$CurrentPage.parameters.listCount}, '{!$CurrentPage.parameters.myListString}', 
                                                  function(result, event){
                                                      if (event.status){
                                                          for(var iCtr = 0; iCtr < result.length; ++iCtr){
                                                              console.log(JSON.stringify(result[iCtr].License_RegistrationRoot));
                                                              appendList = '';
                                                              appendList = appendList + '<article id="printPreview" class="slds-card" style="width: 85%;">'+
                                                                  '<table>'+
                                                                  '<td style="width: 85%;">'+
                                                                  '<header class="slds-media slds-media_center slds-has-flexi-truncate">'+
                                                                  '<div class="slds-media__body">'+
                                                                  '<h2 class="slds-card__header-title" style="font-size: 20px;">Contractor Information</h2>'+
                                                                  '</div>'+
                                                                  '</header>' + 
                                                                  '<footer class="slds-card__footer" style="text-align: left;font-size: 12px">'+
                                                                  '<dl class="slds-list_horizontal slds-wrap">'+
                                                                  '<dt class="slds-item_label slds-text-color_weak slds-truncate" title="Second Label" style="width: 407.5px;">Legal Entity Name</dt>' + 
                                                                  '<dd class="slds-item_detail slds-truncate" title="Description for second label">  ' + result[iCtr].License_RegistrationRoot.Legal_Entity_Name__c + '</dd>'+
                                                                  '<dt class="slds-item_label slds-text-color_weak slds-truncate" title="Second Label" style="width: 407.5px;">Legal Entity Type</dt>' +
                                                                  '<dd class="slds-item_detail slds-truncate" title="Description for second label">  ' + result[iCtr].License_RegistrationRoot.Company_Type__c + '</dd>'+
                                                                  '<dt class="slds-item_label slds-text-color_weak slds-truncate" title="Second Label" style="width: 407.5px;">Status</dt>' +
                                                                  '<dd class="slds-item_detail slds-truncate" title="Description for second label">  ' + result[iCtr].License_RegistrationRoot.Status__c + '</dd>'+
                                                                  '<dt class="slds-item_label slds-text-color_weak slds-truncate" title="Second Label" style="width: 407.5px;">Registration Number</dt>' +
                                                                  '<dd class="slds-item_detail slds-truncate" title="Description for second label">  ' + result[iCtr].License_RegistrationRoot.License_Registration_Number__c + '</dd>'  +   
                                                                  '<dt class="slds-item_label slds-text-color_weak slds-truncate" title="Second Label" style="width: 407.5px;">  Registration effective date</dt>' +
                                                                  '<dd class="slds-item_detail slds-truncate" title="Description for second label">' + /*new Date(parseInt(result[iCtr].License_RegistrationRoot.Effective_Date__c)).toLocaleDateString()*/result[iCtr].FormattedEffectiveDate + '</dd>' + 
                                                                  '<dt class="slds-item_label slds-text-color_weak slds-truncate" title="Second Label" style="width: 407.5px;">Registration expiration date</dt>' + 
                                                                  '<dd class="slds-item_detail slds-truncate" title="Description for second label">' + /*new Date(parseInt(result[iCtr].License_RegistrationRoot.Expiration_Date__c)).toLocaleDateString()*/result[iCtr].FormattedExpirationDate + '</dd>' + 
                                                                  '<dt class="slds-item_label slds-text-color_weak slds-truncate" title="Second Label" style="width: 407.5px;">Mailing Address</dt>' + 
                                                                  '<dd class="slds-item_detail slds-truncate" title="Description for second label">' + testData(result[iCtr].License_RegistrationRoot.Mailing_Address_Line_1__c) + '&nbsp' + testData(result[iCtr].License_RegistrationRoot.Mailing_Address_Line_2__c) + '  ' + testData(result[iCtr].License_RegistrationRoot.Mailing_City__c) + '&nbsp' + testData(result[iCtr].License_RegistrationRoot.Mailing_Postal_Code__c) + '&nbsp' + testData(result[iCtr].License_RegistrationRoot.Mailing_State__c) + '&nbsp' + testData(result[iCtr].License_RegistrationRoot.Mailing_Country__c) + '</dd>' + 
                                                                  '<dt class="slds-item_label slds-text-color_weak slds-truncate" title="Second Label" style="width: 407.5px;">Physical Address</dt>  <dd class="slds-item_detail slds-truncate" title="Business Address">' + testData(result[iCtr].License_RegistrationRoot.Physical_Business_Address_Line_1__c) + '&nbsp' + testData(result[iCtr].License_RegistrationRoot.Physical_Business_Address_Line_2__c) + '  ' + testData(result[iCtr].License_RegistrationRoot.Physical_Business_City__c) + '&nbsp' + testData(result[iCtr].License_RegistrationRoot.Physical_Business_Postal_Code__c) + '&nbsp' +testData(result[iCtr].License_RegistrationRoot.Physical_Business_State__c) + '&nbsp' +testData(result[iCtr].License_RegistrationRoot.Physical_Business_Country__c) + '</dd>' + 
                                                                  '<dt class="slds-item_label slds-text-color_weak slds-truncate" title="Business Email Address" style="width: 407.5px;">Email Address</dt>  <dd class="slds-item_detail slds-truncate" title="Business Email"' + result[iCtr].License_RegistrationRoot.Account_Email__c + '</dd><dt class="slds-item_label slds-text-color_weak slds-truncate" title="Second Label" style="width: 407.5px;">Trade Name/DBA</dt>' + 
                                                                  '<dd class="slds-item_detail slds-truncate" title="DBA Information Details">';
                                                              if (typeof result[iCtr].License_RegistrationRoot.DBAs__r !== 'undefined'){
                                                                  for(var iDBA = 0; iDBA < result[iCtr].License_RegistrationRoot.DBAs__r.length; ++iDBA){
                                                                      appendList =   appendList + result[iCtr].License_RegistrationRoot.DBAs__r[iDBA].Name + '</br>'; 
                                                                  }  
                                                              }    
                                                              appendList = appendList+'</dd></d1>';
                                                              // Loop Through and output Name on Registrations__r child records for each Registration
                                                              appendList = appendList+'<dt class="slds-item_label slds-text-color_weak slds-truncate" title="License Numbers" style="width: 407.5px;">License Number(s)</dt>';
                                                              appendList = appendList+'<dd class="slds-item_detail style="text-align: left;">';
                                                              if(result[iCtr].License_RegistrationRoot.Registrations__r != null){
                                                                  for(var iregistrations = 0; iregistrations < result[iCtr].License_RegistrationRoot.Registrations__r.length; ++iregistrations){
                                                                      appendList =   appendList + result[iCtr].License_RegistrationRoot.Registrations__r[iregistrations].License_Type__c+':'+result[iCtr].License_RegistrationRoot.Registrations__r[iregistrations].License_Number__c+'<br />'; 
                                                                  }
                                                              }
                                                              appendList =   appendList + '</dd></footer></td>'; 
                                                              //Registration History
                                                              appendList = appendList +'<td valign="top">'+
                                                                  '<table class="slds-table slds-table_cell-buffer slds-table_bordered">'+
                                                                  '<thead>'+
                                                                  '<header class="slds-media slds-media_center slds-has-flexi-truncate">'+
                                                                  '<div class="slds-media__body">'+
                                                                  '<h2 class="slds-card__header-title" style="font-size: 20px;">'+
                                                                  'Registration History'+
                                                                  '</h2>'+
                                                                  '</div>'+
                                                                  '</header>'+
                                                                  '<tr>'+
                                                                  '<th>Effective Date &nbsp;&nbsp;</th>'+
                                                                  '<th>Expiration Date</th>'+
                                                                  '</tr>'+
                                                                  '</thead>'+
                                                                  '<tbody>';
                                                              if (typeof result[iCtr].RegistrationHistory !== 'undefined'){
                                                                  for (var iRegHist = 0; iRegHist < result[iCtr].RegistrationHistory.length; ++iRegHist){
                                                                      appendList = appendList +'<tr>'+
                                                                          '<td>'+
                                                                          //new Date(parseInt(result[iCtr].RegistrationHistory[iRegHist].Effective_Date)).toLocaleDateString()+
                                                                          result[iCtr].RegistrationHistory[iRegHist].FormattedEffectiveDate+
                                                                          '</td>'+
                                                                          '<td>'+
                                                                          //new Date(parseInt(result[iCtr].RegistrationHistory[iRegHist].Expiration_Date)).toLocaleDateString()+
                                                                          result[iCtr].RegistrationHistory[iRegHist].FormattedExpirationDate+
                                                                          '</td>'+
                                                                          '</tr>';
                                                                  }
                                                              }
                                                              appendList = appendList +'</tbody>'+
                                                                  '</table>'+
                                                                  '</td>'+
                                                                  '</table>'+
                                                                  '</article>';
                                                              //Legal Entity Information
                                                              var companyType = result[iCtr].License_RegistrationRoot.Company_Type__c;
                                                              var regAccts = 0;
                                                              appendList = appendList + '<article id="printPreview" class="slds-card" style="width: 85%;">'+
                                                                  '<table>'+
                                                                  '<td style="width: 85%;">'+
                                                                  '<header class="slds-media slds-media_center slds-has-flexi-truncate">'+
                                                                  '<div class="slds-media__body">'+
                                                                  '<h2 class="slds-card__header-title" style="font-size: 20px;">Legal Entity Information</h2><br/>'+
                                                                  '</div>'+
                                                                  '</header>'+
                                                                  '<footer class="slds-card__footer" style="text-align: left;font-size: 12px">'+
                                                                  '<div class="demo-only" >';
                                                                  
                                                              if (companyType==='Corporation'){
                                                                  for(regAccts = 0; regAccts < result[iCtr].License_RegistrationRoot.Registration_Accounts__r.length; ++regAccts){
                                                                      if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName==='Corp_or_LLC'){
                                                                          appendList = appendList+'<dl class="slds-dl_horizontal">'+
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Corporation Number:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label"  >'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Corp_or_LLC_ID__c)+'</dd>'+
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >President Name:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label" >'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].PresidentsName__c)+'</dd>'+
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Vice President Name:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label" >'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].VicePresidentName__c)+'</dd>'+
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Treasurer Name:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label" >'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].TreasurerName__c)+'</dd>'+                            
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Secretary Name:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label" >'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].SecretaryName__c)+'</dd>'+
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >CEO Name:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label" >'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].CEOName__c)+'</dd>'+
                                                                              
                                                                              
                                                                              '</dl>'+
                                                                              '<br/>';
                                                                      }
                                                                      if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName==='Agent'){
                                                                          appendList = appendList+'<dl class="slds-dl_horizontal">'+
                                                                          '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Agent of Service Name:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label" >'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].AgentofServiceName__c)+'</dd>'+
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Agent of Service Mailing Address:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Street__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Address_Line_2__c)+
                                                                              '&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_City__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Zip_Code__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_State__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Country__c)+'</dd>'+
                                                                              
                                                                          '</dl>'+
                                                                          '<br/>';
                                                                       }
                                                                  }
                                                              }
                                                              
                                                              if (companyType==='LLC'){
                                                                  for(regAccts = 0; regAccts < result[iCtr].License_RegistrationRoot.Registration_Accounts__r.length; ++regAccts){
                                                                      if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName==='Corp_or_LLC'){
                                                                          appendList = appendList +'<dl class="slds-list_horizontal slds-wrap">'+
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Corporation Number:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Corp_or_LLC_ID__c</dd>'+
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Member Name(s):</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].First_Name__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Last_Name__c)+'</dd>'+
                                                                              
                                                                              '</dl>'+
                                                                              '<br/>';
                                                                      }
                                                                      if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName==='Agent'){
                                                                          appendList = appendList+'<dl class="slds-dl_horizontal">'+
                                                                          '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Agent of Service Name:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label" >'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].AgentofServiceName__c)+'</dd>'+
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Agent of Service Mailing Address:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Street__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Address_Line_2__c)+
                                                                              '&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_City__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Zip_Code__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_State__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Country__c)+'</dd>'+
                                                                              
                                                                          '</dl>'+
                                                                          '<br/>';
                                                                       }
                                                                  }
                                                              }                                      
                                                              
                                                              if (companyType==='Sole Proprietorship'){
                                                                  for(regAccts = 0; regAccts < result[iCtr].License_RegistrationRoot.Registration_Accounts__r.length; ++regAccts){
                                                                      if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName=='Sole_Proprietorship'){
                                                                          appendList = appendList +'<dl class="slds-list_horizontal slds-wrap">'+
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label">Sole Proprietor Name:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r.First_Name__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r.Last_Name__c)+'</dd>'+
                                                                              '</dl>'+
                                                                              '<br/>';
                                                                      }
                                                                  }
                                                              } 
                                                              
                                                              if (companyType==='LLP LP'){
                                                                  for(regAccts = 0; regAccts < result[iCtr].License_RegistrationRoot.Registration_Accounts__r.length; ++regAccts){
                                                                      if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName=='Limited_Partnership'){
                                                                          appendList = appendList+'<dl class="slds-list_horizontal slds-wrap">'+
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >General Partners Name:</dt>'+ 
                                                                              '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r.First_Name__c) +'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r.Last_Name__c)+'</dd>'+
                                                                              
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Entity Type:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r.Corp_or_LLC_ID__c)+'</dd>'+
                                                                              
                                                                              '</dl>'+
                                                                              '<br/>';
                                                                      }
                                                                  }
                                                              }    
                                                              
                                                              if (companyType==='Joint Venture'){
                                                                  for(regAccts = 0; regAccts < result[iCtr].License_RegistrationRoot.Registration_Accounts__r.length; ++regAccts){
                                                                      if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName==='Joint_Venture'){
                                                                          
                                                                          if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r.recordtype.Joint_Venture_Company_Type__c =='Corporation'){
                                                                              appendList = appendList+'<dl class="slds-list_horizontal slds-wrap">'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Legal Entity Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Legal_Entity_Name__c)+'</dd>'+                                      
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Corporation Number:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Corp_or_LLC_ID__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >President Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].PresidentsName__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Vice President Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].VicePresidentName__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Treasurer Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].TreasurerName__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Secretary Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].SecretaryName__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >CEO Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].CEOName__c)+'</dd>'+
                                                                                  
                                                                                  '</dl>'+
                                                                                  '<br/>';
                                                                          }
                                                                          if (companyType==='LLC'){
                                                                              appendList = appendList+'<dl class="slds-list_horizontal slds-wrap">'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Legal Entity Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Legal_Entity_Name__c)+'</dd>'+   
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Corporation Number:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Corp_or_LLC_ID__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Member Name(s):</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].First_Name__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r.Last_Name__c)+'</dd>'+
                                                                                  
                                                                                  '</dl>'+
                                                                                  '<br/>';
                                                                          }
                                                                          
                                                                          if (companyType==='Sole Proprietorship'){
                                                                              appendList = appendList+'<dl class="slds-list_horizontal slds-wrap">'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Legal Entity Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Legal_Entity_Name__c)+'</dd>'+   
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Sole Proprietor Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].First_Name__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r.Last_Name__c)+'</dd>'+
                                                                                  
                                                                                  '</dl>'+
                                                                                  '<br/>'
                                                                          }
                                                                          
                                                                          if (companyType==='Limited Partnership'){
                                                                              appendList = appendList+'<dl class="slds-list_horizontal slds-wrap">'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Legal Entity Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Legal_Entity_Name__c)+'</dd>'+   
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >General Partners Name:</dt>'+ 
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].First_Name__c+'&nbsp;'+result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Last_Name__c)+'</dd>'+
                                                                                  
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Entity Type:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Corp_or_LLC_ID__c)+'</dd>'+
                                                                                  
                                                                                  '</dl>'+
                                                                                  '<br/>';
                                                                          }                                    
                                                                          
                                                                      }
                                                                      if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName==='Agent'){
                                                                          appendList = appendList+'<dl class="slds-dl_horizontal">'+
                                                                          '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Agent of Service Name:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label" >'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].AgentofServiceName__c)+'</dd>'+
                                                                              
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Agent of Service Mailing Address:</dt>'+
                                                                              '<dd class="slds-dl_horizontal__detail" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Street__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Address_Line_2__c)+
                                                                              '&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_City__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Zip_Code__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_State__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Country__c)+'</dd>'+
                                                                              
                                                                          '</dl>'+
                                                                          '<br/>';
                                                                       }
                                                                  }
                                                              }    
                                                              
                                                              if (companyType==='General Partnership'){
                                                                  
                                                                  for(regAccts = 0; regAccts < result[iCtr].License_RegistrationRoot.Registration_Accounts__r.length; ++regAccts){
                                                                      if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName==='Partnership'){
                                                                          
                                                                          if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Joint_Venture_Company_Type__c ==='Corporation'){
                                                                              appendList = appendList +'<dl class="slds-list_horizontal slds-wrap">'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Partner Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Legal_Entity_Name__c)+'</dd>'+                                      
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Corporation Number:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Corp_or_LLC_ID__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >President Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].PresidentsName__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Vice President Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].VicePresidentName__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Treasurer Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].TreasurerName__c)+'</dd>'+
                                                                                  
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Secretary Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].SecretaryName__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >CEO Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].CEOName__c)+'</dd>'+
                                                                                  
                                                                                  '</dl>'+
                                                                                  '<br/>';
                                                                          }
                                                                          
                                                                          if (result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Joint_Venture_Company_Type__c==='LLC'){
                                                                              appendList = appendList+'<dl class="slds-list_horizontal slds-wrap">'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Partner Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Legal_Entity_Name__c)+'</dd>'+   
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Corporation Number:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Corp_or_LLC_ID__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Member Name(s):</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].First_Name__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Last_Name__c)+'</dd>'+
                                                                                  
                                                                                  '</dl>'+
                                                                                  '<br/>';
                                                                          }
                                                                          
                                                                          if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Joint_Venture_Company_Type__c=='Sole Proprietorship'){
                                                                              appendList= appendList+'<dl class="slds-list_horizontal slds-wrap">'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Partner Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Legal_Entity_Name__c)+'</dd>'+   
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Sole Proprietor Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].First_Name__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Last_Name__c)+'</dd>'+
                                                                                  
                                                                                  '</dl>'+
                                                                                  '<br/>';
                                                                          }
                                                                          
                                                                          if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Joint_Venture_Company_Type__c=='Limited Partnership'){
                                                                              appendList = appendList+'<dl class="slds-list_horizontal slds-wrap">'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Partner Name::</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Legal_Entity_Name__c)+'</dd>'+   
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >General Partners Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].First_Name__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r.Last_Name__c)+'</dd>'+
                                                                                  
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Entity Number:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Corp_or_LLC_ID__c)+'</dd>'+
                                                                                  
                                                                                  '</dl>'+
                                                                                  '<br/>';
                                                                          }  
                                                                          if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName=='Partnership'){
                                                                              appendList = appendList+'<dl class="slds-list_horizontal slds-wrap">'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Partner Legal Entity Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Corp_or_LLC_Name__c)+'</dd>'+   
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Partner Legal Entity Type:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Joint_Venture_Company_Type__c)+'</dd>'+
                                                                                  
                                                                                  
                                                                                  '</dl>'+
                                                                                  '<br/>';
                                                                          }
                                                                          if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName=='General Partnership'){
                                                                              appendList = appendList+'<dl class="slds-list_horizontal slds-wrap">'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Partner Legal Entity Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Corp_or_LLC_Name__c)+'</dd>'+   
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Partner Legal Entity Type:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Joint_Venture_Company_Type__c)+'</dd>'+
                                                                                  
                                                                                  
                                                                                  '</dl>'+
                                                                                  '<br/>';
                                                                          }
                                                                          if(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].RecordType.DeveloperName==='Agent'){
                                                                              appendList = appendList+'<dl class="slds-dl_horizontal">'+
                                                                              '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Agent of Service Name:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail" title="Description for second label" >'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].AgentofServiceName__c)+'</dd>'+
                                                                                  
                                                                                  '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label" >Agent of Service Mailing Address:</dt>'+
                                                                                  '<dd class="slds-dl_horizontal__detail" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Street__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Address_Line_2__c)+
                                                                                  '&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_City__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Zip_Code__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_State__c)+'&nbsp;'+testData(result[iCtr].License_RegistrationRoot.Registration_Accounts__r[regAccts].Mailing_Country__c)+'</dd>'+
                                                                                  
                                                                              '</dl>'+
                                                                              '<br/>';
                                                                           }
                                                                          
                                                                      }
                                                                }
                                                              }                            
                                                              
                                                              appendList = appendList+'</div>'+
                                                                  '</footer>'+
                                                                  '</td>'+
                                                                  '</table>'+
                                                                  '</article>';
                                                               //Workers Comp
                                                              appendList = appendList +'<div style="margin-top:20px;margin-bottom:30px;">'+
                                                                  '<article class="slds-card" style="width: 85%;">'+
                                                                  '<div class="slds-card__header slds-grid" >'+
                                                                  '<div class="slds-media__body">'+
                                                                  '<h2 class="slds-card__header-title" style="font-size: 20px;">Workers Compensation</h2>'+
                                                                  '</div>'+
                                                                  '</div>'+
                                                                  '<footer class="slds-card__footer" style="text-align: left;font-size: 12px">'+
                                                                  '<div class="demo-only">'+
                                                                  '<article class="slds-tile" style="font-size: 14px;">'+
                                                                  
                                                                  '<div class="slds-tile__detail">'+
                                                                  '<dl class="slds-list_horizontal slds-wrap">'+
                                                                  '<dt class="slds-item_label  slds-text-color_weak"  title="First Label">Do you lease employees through Professional Employer Organization (PEO)?:</dt>'+
                                                                  '<dd class="slds-item_detail  slds-truncate" title="Description for first label">'+testData(result[iCtr].License_RegistrationRoot.Lease_Through_PEO__c)+'</dd>'+
                                                                  '<dt class="slds-item_label slds-text-color_weak "  title="Second Label">Please provide your current workers compensation insurance information below:</dt>'+
                                                                  '<dd class="slds-item_detail slds-truncate" title="Description for second label"></dd>'+
                                                                  
                                                                  '<br/>PEO Information<br/>'+
                                                                  '<div class="slds-grid">'+
                                                                  '<div class="slds-col slds-size_1-of-2">'+
                                                                  'PEO Name'+
                                                                  '</div>'+
                                                                  '<div class="slds-col slds-size_2-of-2">'+
                                                                  testData(result[iCtr].License_RegistrationRoot.PEO_Name__c)+
                                                                  '</div>'+
                                                                  '</div>'+  
                                                                  '<div class="slds-grid">'+
                                                                  '<div class="slds-col slds-size_1-of-2">'+
                                                                  'PEO Phone'+
                                                                  '</div>'+
                                                                  '<div class="slds-col slds-size_2-of-2">'+
                                                                  testData(result[iCtr].License_RegistrationRoot.PEO_Phone__c)+
                                                                  '</div>'+
                                                                  '</div>'+  
                                                                  '<div class="slds-grid">'+
                                                                  '<div class="slds-col slds-size_1-of-2">'+
                                                                  'PEO Email'+
                                                                  '</div>'+
                                                                  '<div class="slds-col slds-size_2-of-2">'+
                                                                  testData(result[iCtr].License_RegistrationRoot.PEO_Email__c)+
                                                                  '</div>'+
                                                                  '</div>'+ 
                                                                  '</dl>'+
                                                                  '<br/>';      
                                                              if (result[iCtr].License_RegistrationRoot.Workers_Comp_Selection__c==='Insured by carrier'){
                                                                  appendList = appendList+'Insured by Carrier<br/>'+
                                                                      
                                                                      '<dl class="slds-list_horizontal slds-wrap">'+
                                                                      '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label">Policy Holder Name:</dt>'+
                                                                      '<dd class="slds-dl_horizontal__detail  slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Workers_Compensation_Carrier__c)+'</dd>'+
                                                                      
                                                                      '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label">Insurance Carrier:</dt>'+
                                                                      '<dd class="slds-dl_horizontal__detail  slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Insurance_Carrier__c)+'</dd>'+
                                                                      
                                                                      '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label">Policy Number:</dt>'+
                                                                      '<dd class="slds-dl_horizontal__detail  slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.WCI_Cert_Number__c)+'</dd>'+
                                                                      
                                                                      '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label">Inception date:</dt>'+
                                                                      '<dd class="slds-dl_horizontal__detail  slds-truncate" title="Description for second label">'+
                                                                      /*new Date(parseInt(result[iCtr].License_RegistrationRoot.WCI_Initial_Certification_Date__c)).toLocaleDateString()*/ result[iCtr].FormattedWCIInitialCertificationDate+
                                                                      '</dd>'+
                                                                      
                                                                      '<dt class="slds-dl_horizontal__label slds-text-color_weak slds-truncate" title="Second Label">Expiration Date:</dt>'+
                                                                      '<dd class="slds-dl_horizontal__detail  slds-truncate" title="Description for second label">'+
                                                                      /*new Date(parseInt(result[iCtr].License_RegistrationRoot.WCI_Expiration_Date__c)).toLocaleDateString()*/ result[iCtr].FormattedWCIExpirationDate+
                                                                      '</dd>'+
                                                                      
                                                                      '</dl>';
                                                              }
                                                              new Date(parseInt(result[iCtr].License_RegistrationRoot.Effective_Date__c)).toLocaleDateString()
                                                              if(result[iCtr].License_RegistrationRoot.Workers_Comp_Selection__c==='Self-Insured'){
                                                                  appendList = appendList+'Self Insured<br/>'+
                                                                      '<dl class="slds-list_horizontal slds-wrap">'+
                                                                      
                                                                      
                                                                      '<dt class="slds-item_label slds-text-color_weak slds-truncate" title="Second Label">Workers Compensation Cert/Policy Number:</dt>'+
                                                                      '<dd class="slds-item_detail  slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.WCI_Cert_Number__c)+'</dd>'+
                                                                      
                                                                      '<dt class="slds-item_label  slds-text-color_weak slds-truncate" title="Second Label">Workers Compensation Certification Date:</dt>'+
                                                                      '<dd class="slds-item_detail  slds-truncate" title="Description for second label">'+
                                                                      /*new Date(parseInt(result[iCtr].License_RegistrationRoot.WCI_Initial_Certification_Date__c)).toLocaleDateString()*/ result[iCtr].FormattedWCIInitialCertificationDate+  
                                                                      '</dd>'+
                                                                      
                                                                      
                                                                      '</dl>';
                                                              }
                                                              
                                                              if(result[iCtr].License_RegistrationRoot.Workers_Comp_Selection__c==='Exempt from workers compensation insurance'){
                                                                  appendList = appendList+'Exempt from workers compensation insurance<br/>'+
                                                                      '<dl class="slds-list_horizontal slds-wrap">'+
                                                                      
                                                                      '<dt class="slds-dl_horizontal__label  slds-text-color_weak slds-truncate" title="Second Label">Exempt Reason:</dt>'+
                                                                      '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Exempt_Reason__c)+'</dd>'+
                                                                      
                                                                      '<dt class="slds-dl_horizontal__label  slds-text-color_weak slds-truncate" title="Second Label">Insurance Carrier:</dt>'+
                                                                      '<dd class="slds-dl_horizontal__detail slds-truncate" title="Description for second label">'+testData(result[iCtr].License_RegistrationRoot.Insurance_Carrier__c)+'</dd>'+
                                                                      
                                                                      
                                                                      '</dl>';
                                                              }
                                                              
                                                              
                                                              appendList = appendList+'</div>'+
                                                                  '</article>'+
                                                                  
                                                                  '</div>'+
                                                                  '</footer>'+
                                                                  '</article>'+
                                                                  '</div>';
                                                              //end workers comp
                                                              $('#RegistrationDataTable').append(appendList);
                                                              $('#stepList li').css('width', ((100/result.length)-2)+'%'); 
                                                          }//end outer for  
                                                          $("#spinner").hide();
                                                          //load the print dialog here
                                                          if (appendList != ''){
                                                             $(document).trigger('printPreviewLoaded');
                                                          }
                                                      }else{//end outer if
                                                          $("#spinner").hide();
                                                          $('#errorMessage').text(event.message);
                                                          $('#errorDisplay').show();
                                                      }
                                                      
                                                      
                                                  }, {escape: true}
                                                 );
            
    };
    
    
    
    $(document).ready(function() {
        //window.document.close();
        //window.focus();   
        //window.print();
        //window.close();
        $("#spinner").show();
        $(document).on("printPreviewLoaded", function(){setTimeout(function () { window.print(); window.onfocus = function () { setTimeout(function () { window.close(); }, 4000); }}, 1000);});
        getnewRegList();
        
        //setTimeout(function () { window.print(); }, 10000);
        
        window.onfocus = function () { setTimeout(function () { window.close(); }, 1000); }
        
    });
    /* take a data object and test if it is defined - return the value or blank if undefined */
    function testData(data){
        if (typeof data === 'undefined' || data === null){
            return ''; 
        }else{
            return data; 
        }
    }
    </script>
</apex:page>